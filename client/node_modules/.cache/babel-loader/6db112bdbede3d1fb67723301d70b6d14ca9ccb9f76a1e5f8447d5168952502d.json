{"ast":null,"code":"var _jsxFileName = \"/Users/davidmcguire/Desktop/Master/Cursor/AudioZoom/client/src/pages/ComposeMessage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Card from '../components/Card';\nimport MessageForm from '../components/MessageForm';\nimport UserSearch from '../components/UserSearch';\nimport api from '../utils/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PageContainer = styled.div`\n  max-width: 800px;\n  margin: 2rem auto;\n  padding: 0 1rem;\n`;\n_c = PageContainer;\nconst PageTitle = styled.h1`\n  margin-bottom: 1.5rem;\n  color: ${props => props.theme.colors.text};\n  font-weight: ${props => props.theme.fontWeights.bold};\n`;\n_c2 = PageTitle;\nconst RecipientInfo = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding: 1rem;\n  background-color: ${props => props.theme.colors.backgroundDark};\n  border-radius: ${props => props.theme.borderRadius.medium};\n`;\n_c3 = RecipientInfo;\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-right: 1rem;\n`;\n_c4 = Avatar;\nconst RecipientName = styled.h3`\n  margin: 0;\n  color: ${props => props.theme.colors.text};\n  font-weight: ${props => props.theme.fontWeights.semibold};\n`;\n_c5 = RecipientName;\nconst ErrorMessage = styled.div`\n  color: ${props => props.theme.colors.error};\n  background-color: rgba(255, 59, 48, 0.1);\n  border: 1px solid rgba(255, 59, 48, 0.2);\n  border-radius: ${props => props.theme.borderRadius.small};\n  padding: 0.75rem 1rem;\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n`;\n_c6 = ErrorMessage;\nconst LoadingMessage = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: ${props => props.theme.colors.textLight};\n`;\n_c7 = LoadingMessage;\nconst ComposeMessage = () => {\n  _s();\n  const {\n    userId\n  } = useParams();\n  const navigate = useNavigate();\n  const [recipient, setRecipient] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    const fetchRecipient = async () => {\n      if (!userId) {\n        setLoading(false);\n        return;\n      }\n      try {\n        setLoading(true);\n        const response = await api.get(`/api/users/${userId}`);\n        setRecipient(response.data);\n        setError('');\n      } catch (err) {\n        console.error('Error fetching recipient:', err);\n        if (err.response) {\n          setError(err.response.data.message || 'Failed to load recipient information');\n        } else if (err.request) {\n          setError('Network error - could not connect to server');\n        } else {\n          setError(err.message || 'Failed to load recipient information');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchRecipient();\n  }, [userId]);\n  const handleMessageSent = () => {\n    navigate('/inbox');\n  };\n  const handleUserSelect = user => {\n    setRecipient(user);\n    setError('');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(PageContainer, {\n      children: /*#__PURE__*/_jsxDEV(LoadingMessage, {\n        children: \"Loading recipient information...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(PageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n      children: \"New Message\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [error && /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), !userId && /*#__PURE__*/_jsxDEV(UserSearch, {\n          onSelectUser: handleUserSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this), recipient && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(RecipientInfo, {\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              src: recipient.profilePicture || '/default-avatar.png',\n              alt: recipient.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(RecipientName, {\n              children: [\"To: \", recipient.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MessageForm, {\n            recipientId: recipient._id,\n            onMessageSent: handleMessageSent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n_s(ComposeMessage, \"byPGJ/wDe9+RyhVsGAG0D9VhZHs=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c8 = ComposeMessage;\nexport default ComposeMessage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n$RefreshReg$(_c, \"PageContainer\");\n$RefreshReg$(_c2, \"PageTitle\");\n$RefreshReg$(_c3, \"RecipientInfo\");\n$RefreshReg$(_c4, \"Avatar\");\n$RefreshReg$(_c5, \"RecipientName\");\n$RefreshReg$(_c6, \"ErrorMessage\");\n$RefreshReg$(_c7, \"LoadingMessage\");\n$RefreshReg$(_c8, \"ComposeMessage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","styled","Card","MessageForm","UserSearch","api","jsxDEV","_jsxDEV","Fragment","_Fragment","PageContainer","div","_c","PageTitle","h1","props","theme","colors","text","fontWeights","bold","_c2","RecipientInfo","backgroundDark","borderRadius","medium","_c3","Avatar","img","_c4","RecipientName","h3","semibold","_c5","ErrorMessage","error","small","_c6","LoadingMessage","textLight","_c7","ComposeMessage","_s","userId","navigate","recipient","setRecipient","loading","setLoading","setError","fetchRecipient","response","get","data","err","console","message","request","handleMessageSent","handleUserSelect","user","children","fileName","_jsxFileName","lineNumber","columnNumber","Body","onSelectUser","src","profilePicture","alt","name","recipientId","_id","onMessageSent","_c8","$RefreshReg$"],"sources":["/Users/davidmcguire/Desktop/Master/Cursor/AudioZoom/client/src/pages/ComposeMessage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Card from '../components/Card';\nimport MessageForm from '../components/MessageForm';\nimport UserSearch from '../components/UserSearch';\nimport api from '../utils/api';\n\nconst PageContainer = styled.div`\n  max-width: 800px;\n  margin: 2rem auto;\n  padding: 0 1rem;\n`;\n\nconst PageTitle = styled.h1`\n  margin-bottom: 1.5rem;\n  color: ${props => props.theme.colors.text};\n  font-weight: ${props => props.theme.fontWeights.bold};\n`;\n\nconst RecipientInfo = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding: 1rem;\n  background-color: ${props => props.theme.colors.backgroundDark};\n  border-radius: ${props => props.theme.borderRadius.medium};\n`;\n\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-right: 1rem;\n`;\n\nconst RecipientName = styled.h3`\n  margin: 0;\n  color: ${props => props.theme.colors.text};\n  font-weight: ${props => props.theme.fontWeights.semibold};\n`;\n\nconst ErrorMessage = styled.div`\n  color: ${props => props.theme.colors.error};\n  background-color: rgba(255, 59, 48, 0.1);\n  border: 1px solid rgba(255, 59, 48, 0.2);\n  border-radius: ${props => props.theme.borderRadius.small};\n  padding: 0.75rem 1rem;\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n`;\n\nconst LoadingMessage = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: ${props => props.theme.colors.textLight};\n`;\n\nconst ComposeMessage = () => {\n  const { userId } = useParams();\n  const navigate = useNavigate();\n  const [recipient, setRecipient] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchRecipient = async () => {\n      if (!userId) {\n        setLoading(false);\n        return;\n      }\n\n      try {\n        setLoading(true);\n        const response = await api.get(`/api/users/${userId}`);\n        setRecipient(response.data);\n        setError('');\n      } catch (err) {\n        console.error('Error fetching recipient:', err);\n        if (err.response) {\n          setError(err.response.data.message || 'Failed to load recipient information');\n        } else if (err.request) {\n          setError('Network error - could not connect to server');\n        } else {\n          setError(err.message || 'Failed to load recipient information');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchRecipient();\n  }, [userId]);\n\n  const handleMessageSent = () => {\n    navigate('/inbox');\n  };\n\n  const handleUserSelect = (user) => {\n    setRecipient(user);\n    setError('');\n  };\n\n  if (loading) {\n    return (\n      <PageContainer>\n        <LoadingMessage>Loading recipient information...</LoadingMessage>\n      </PageContainer>\n    );\n  }\n\n  return (\n    <PageContainer>\n      <PageTitle>New Message</PageTitle>\n      \n      <Card>\n        <Card.Body>\n          {error && <ErrorMessage>{error}</ErrorMessage>}\n          \n          {!userId && (\n            <UserSearch onSelectUser={handleUserSelect} />\n          )}\n          \n          {recipient && (\n            <>\n              <RecipientInfo>\n                <Avatar \n                  src={recipient.profilePicture || '/default-avatar.png'} \n                  alt={recipient.name} \n                />\n                <RecipientName>To: {recipient.name}</RecipientName>\n              </RecipientInfo>\n              \n              <MessageForm \n                recipientId={recipient._id} \n                onMessageSent={handleMessageSent}\n              />\n            </>\n          )}\n        </Card.Body>\n      </Card>\n    </PageContainer>\n  );\n};\n\nexport default ComposeMessage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}