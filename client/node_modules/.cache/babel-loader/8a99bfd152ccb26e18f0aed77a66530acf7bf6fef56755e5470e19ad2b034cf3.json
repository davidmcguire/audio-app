{"ast":null,"code":"var _jsxFileName = \"/Users/davidmcguire/Desktop/Master/Cursor/AudioZoom/client/src/components/SearchBar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './SearchBar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SearchBar = () => {\n  _s();\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n  const searchRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Add click event listener to close results when clicking outside\n    const handleClickOutside = event => {\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\n        setShowResults(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n  useEffect(() => {\n    const searchUsers = async () => {\n      if (!query.trim()) {\n        setResults([]);\n        return;\n      }\n      setIsLoading(true);\n      try {\n        const token = localStorage.getItem('token');\n        const response = await fetch(`http://localhost:5001/api/users/search?query=${encodeURIComponent(query)}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error('Failed to search users');\n        }\n        const data = await response.json();\n        setResults(data);\n      } catch (error) {\n        console.error('Error searching users:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    // Debounce search requests\n    const timeoutId = setTimeout(() => {\n      searchUsers();\n    }, 300);\n    return () => clearTimeout(timeoutId);\n  }, [query]);\n  const handleInputChange = e => {\n    setQuery(e.target.value);\n    setShowResults(true);\n  };\n  const handleUserClick = userId => {\n    navigate(`/profile/${userId}`);\n    setShowResults(false);\n    setQuery('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    ref: searchRef,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Search users...\",\n        value: query,\n        onChange: handleInputChange,\n        className: \"search-input\",\n        onFocus: () => setShowResults(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"search-icon\",\n        children: \"\\uD83D\\uDD0D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), showResults && (query.trim() || results.length > 0) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-results\",\n      children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-loading\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this) : results.length > 0 ? results.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-result-item\",\n        onClick: () => handleUserClick(user._id),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-result-avatar\",\n          children: user.picture ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: user.picture,\n            alt: `${user.name}'s avatar`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avatar-placeholder\",\n            children: user.name[0]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-result-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-result-name\",\n            children: user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-result-bio\",\n            children: user.bio || 'No bio available'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this)]\n      }, user._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }, this)) : query.trim() ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-no-results\",\n        children: \"No users found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchBar, \"hjKZluhk+TxWoS/n3kp6t3vgRbQ=\", false, function () {\n  return [useNavigate];\n});\n_c = SearchBar;\nexport default SearchBar;\nvar _c;\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","jsxDEV","_jsxDEV","SearchBar","_s","query","setQuery","results","setResults","isLoading","setIsLoading","showResults","setShowResults","searchRef","navigate","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","searchUsers","trim","token","localStorage","getItem","response","fetch","encodeURIComponent","headers","ok","Error","data","json","error","console","timeoutId","setTimeout","clearTimeout","handleInputChange","e","value","handleUserClick","userId","className","ref","children","type","placeholder","onChange","onFocus","fileName","_jsxFileName","lineNumber","columnNumber","length","map","user","onClick","_id","picture","src","alt","name","bio","_c","$RefreshReg$"],"sources":["/Users/davidmcguire/Desktop/Master/Cursor/AudioZoom/client/src/components/SearchBar.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './SearchBar.css';\n\nconst SearchBar = () => {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n  const searchRef = useRef(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Add click event listener to close results when clicking outside\n    const handleClickOutside = (event) => {\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\n        setShowResults(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    const searchUsers = async () => {\n      if (!query.trim()) {\n        setResults([]);\n        return;\n      }\n\n      setIsLoading(true);\n      try {\n        const token = localStorage.getItem('token');\n        const response = await fetch(`http://localhost:5001/api/users/search?query=${encodeURIComponent(query)}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to search users');\n        }\n\n        const data = await response.json();\n        setResults(data);\n      } catch (error) {\n        console.error('Error searching users:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    // Debounce search requests\n    const timeoutId = setTimeout(() => {\n      searchUsers();\n    }, 300);\n\n    return () => clearTimeout(timeoutId);\n  }, [query]);\n\n  const handleInputChange = (e) => {\n    setQuery(e.target.value);\n    setShowResults(true);\n  };\n\n  const handleUserClick = (userId) => {\n    navigate(`/profile/${userId}`);\n    setShowResults(false);\n    setQuery('');\n  };\n\n  return (\n    <div className=\"search-container\" ref={searchRef}>\n      <div className=\"search-input-container\">\n        <input\n          type=\"text\"\n          placeholder=\"Search users...\"\n          value={query}\n          onChange={handleInputChange}\n          className=\"search-input\"\n          onFocus={() => setShowResults(true)}\n        />\n        <i className=\"search-icon\">üîç</i>\n      </div>\n      \n      {showResults && (query.trim() || results.length > 0) && (\n        <div className=\"search-results\">\n          {isLoading ? (\n            <div className=\"search-loading\">Loading...</div>\n          ) : results.length > 0 ? (\n            results.map(user => (\n              <div \n                key={user._id} \n                className=\"search-result-item\"\n                onClick={() => handleUserClick(user._id)}\n              >\n                <div className=\"search-result-avatar\">\n                  {user.picture ? (\n                    <img src={user.picture} alt={`${user.name}'s avatar`} />\n                  ) : (\n                    <div className=\"avatar-placeholder\">{user.name[0]}</div>\n                  )}\n                </div>\n                <div className=\"search-result-info\">\n                  <div className=\"search-result-name\">{user.name}</div>\n                  <div className=\"search-result-bio\">{user.bio || 'No bio available'}</div>\n                </div>\n              </div>\n            ))\n          ) : query.trim() ? (\n            <div className=\"search-no-results\">No users found</div>\n          ) : null}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SearchBar; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}