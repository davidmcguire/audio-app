{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import styled from'styled-components';import Button from'../components/Button';import Card from'../components/Card';import api from'../utils/api';import{FaPaperPlane}from'react-icons/fa';import'./Inbox.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmptyState=styled.div`\n  text-align: center;\n  padding: 3rem 1rem;\n  color: ${props=>props.theme.colors.textLight};\n`;const ActionButton=styled(Button)`\n  margin-left: 0.5rem;\n`;const SentIndicator=styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: ${props=>props.theme.colors.textLight};\n  font-size: 0.9rem;\n`;const SentMessages=()=>{const[messages,setMessages]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{fetchSentMessages();},[]);const fetchSentMessages=async()=>{try{setLoading(true);const response=await api.get('/api/messages/sent');setMessages(response.data);setError(null);}catch(err){console.error('Error fetching sent messages:',err);if(err.response){setError(err.response.data.message||'Failed to load sent messages');}else if(err.request){setError('Network error - could not connect to server');}else{setError(err.message||'Failed to load sent messages');}}finally{setLoading(false);}};const deleteMessage=async messageId=>{try{await api.delete(`/api/messages/${messageId}`);// Remove the message from the local state\nsetMessages(messages.filter(msg=>msg._id!==messageId));}catch(err){console.error('Error deleting message:',err);// Show error toast or notification here if needed\n}};const formatDate=dateString=>{const options={year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'};return new Date(dateString).toLocaleDateString(undefined,options);};const navigateToCompose=()=>{navigate('/compose');};const navigateToInbox=()=>{navigate('/inbox');};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"inbox-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sent Messages\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading messages...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"inbox-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inbox-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sent Messages\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inbox-actions\",children:[/*#__PURE__*/_jsx(Button,{$variant:\"outline\",onClick:navigateToInbox,style:{marginRight:'10px'},children:\"Inbox\"}),/*#__PURE__*/_jsx(Button,{$variant:\"primary\",onClick:navigateToCompose,children:\"New Message\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),!error&&messages.length===0?/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"You haven't sent any messages yet\"}),/*#__PURE__*/_jsx(Button,{$variant:\"primary\",onClick:navigateToCompose,children:\"Send a Message\"})]})})}):/*#__PURE__*/_jsx(\"div\",{className:\"messages-list\",children:messages.map(message=>{var _message$recipient,_message$recipient2,_message$recipient3;return/*#__PURE__*/_jsxs(\"div\",{className:\"message-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"message-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:((_message$recipient=message.recipient)===null||_message$recipient===void 0?void 0:_message$recipient.picture)||'/default-avatar.png',alt:(_message$recipient2=message.recipient)===null||_message$recipient2===void 0?void 0:_message$recipient2.name,className:\"sender-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-info\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"To: \",(_message$recipient3=message.recipient)===null||_message$recipient3===void 0?void 0:_message$recipient3.name]}),/*#__PURE__*/_jsx(\"span\",{className:\"message-date\",children:formatDate(message.createdAt)})]}),/*#__PURE__*/_jsxs(SentIndicator,{children:[/*#__PURE__*/_jsx(FaPaperPlane,{}),\"Sent\"]}),message.type==='AUDIO_REQUEST'&&/*#__PURE__*/_jsx(\"span\",{className:\"message-type\",children:\"Audio Request\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"message-content\",children:message.content}),message.type==='AUDIO_REQUEST'&&message.requestDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"request-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",message.requestDetails.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",message.requestDetails.status]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"message-actions\",children:/*#__PURE__*/_jsx(ActionButton,{$variant:\"danger\",$size:\"small\",onClick:e=>{e.stopPropagation();deleteMessage(message._id);},children:\"Delete\"})})]},message._id);})})]});};export default SentMessages;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","styled","Button","Card","api","FaPaperPlane","jsx","_jsx","jsxs","_jsxs","EmptyState","div","props","theme","colors","textLight","ActionButton","SentIndicator","SentMessages","messages","setMessages","loading","setLoading","error","setError","navigate","fetchSentMessages","response","get","data","err","console","message","request","deleteMessage","messageId","delete","filter","msg","_id","formatDate","dateString","options","year","month","day","hour","minute","Date","toLocaleDateString","undefined","navigateToCompose","navigateToInbox","className","children","$variant","onClick","style","marginRight","length","Body","map","_message$recipient","_message$recipient2","_message$recipient3","src","recipient","picture","alt","name","createdAt","type","content","requestDetails","price","status","$size","e","stopPropagation"],"sources":["/Users/davidmcguire/Desktop/Master/Cursor/AudioZoom/client/src/pages/SentMessages.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Button from '../components/Button';\nimport Card from '../components/Card';\nimport api from '../utils/api';\nimport { FaPaperPlane } from 'react-icons/fa';\nimport './Inbox.css';\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 3rem 1rem;\n  color: ${props => props.theme.colors.textLight};\n`;\n\nconst ActionButton = styled(Button)`\n  margin-left: 0.5rem;\n`;\n\nconst SentIndicator = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: ${props => props.theme.colors.textLight};\n  font-size: 0.9rem;\n`;\n\nconst SentMessages = () => {\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    fetchSentMessages();\n  }, []);\n\n  const fetchSentMessages = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/api/messages/sent');\n      setMessages(response.data);\n      setError(null);\n    } catch (err) {\n      console.error('Error fetching sent messages:', err);\n      if (err.response) {\n        setError(err.response.data.message || 'Failed to load sent messages');\n      } else if (err.request) {\n        setError('Network error - could not connect to server');\n      } else {\n        setError(err.message || 'Failed to load sent messages');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteMessage = async (messageId) => {\n    try {\n      await api.delete(`/api/messages/${messageId}`);\n      \n      // Remove the message from the local state\n      setMessages(messages.filter(msg => msg._id !== messageId));\n    } catch (err) {\n      console.error('Error deleting message:', err);\n      // Show error toast or notification here if needed\n    }\n  };\n\n  const formatDate = (dateString) => {\n    const options = { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };\n    return new Date(dateString).toLocaleDateString(undefined, options);\n  };\n\n  const navigateToCompose = () => {\n    navigate('/compose');\n  };\n\n  const navigateToInbox = () => {\n    navigate('/inbox');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"inbox-container\">\n        <h1>Sent Messages</h1>\n        <div className=\"loading\">Loading messages...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"inbox-container\">\n      <div className=\"inbox-header\">\n        <h1>Sent Messages</h1>\n        <div className=\"inbox-actions\">\n          <Button $variant=\"outline\" onClick={navigateToInbox} style={{ marginRight: '10px' }}>\n            Inbox\n          </Button>\n          <Button $variant=\"primary\" onClick={navigateToCompose}>\n            New Message\n          </Button>\n        </div>\n      </div>\n      \n      {error && <div className=\"error-message\">{error}</div>}\n      \n      {!error && messages.length === 0 ? (\n        <Card>\n          <Card.Body>\n            <EmptyState>\n              <p>You haven't sent any messages yet</p>\n              <Button $variant=\"primary\" onClick={navigateToCompose}>\n                Send a Message\n              </Button>\n            </EmptyState>\n          </Card.Body>\n        </Card>\n      ) : (\n        <div className=\"messages-list\">\n          {messages.map((message) => (\n            <div \n              key={message._id} \n              className=\"message-item\"\n            >\n              <div className=\"message-header\">\n                <img \n                  src={message.recipient?.picture || '/default-avatar.png'} \n                  alt={message.recipient?.name} \n                  className=\"sender-avatar\"\n                />\n                <div className=\"message-info\">\n                  <h3>To: {message.recipient?.name}</h3>\n                  <span className=\"message-date\">{formatDate(message.createdAt)}</span>\n                </div>\n                <SentIndicator>\n                  <FaPaperPlane />\n                  Sent\n                </SentIndicator>\n                {message.type === 'AUDIO_REQUEST' && (\n                  <span className=\"message-type\">Audio Request</span>\n                )}\n              </div>\n              <p className=\"message-content\">{message.content}</p>\n              {message.type === 'AUDIO_REQUEST' && message.requestDetails && (\n                <div className=\"request-details\">\n                  <p>Price: ${message.requestDetails.price}</p>\n                  <p>Status: {message.requestDetails.status}</p>\n                </div>\n              )}\n              <div className=\"message-actions\">\n                <ActionButton \n                  $variant=\"danger\" \n                  $size=\"small\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    deleteMessage(message._id);\n                  }}\n                >\n                  Delete\n                </ActionButton>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SentMessages; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}