{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import styled from'styled-components';import Card from'../components/Card';import MessageForm from'../components/MessageForm';import api from'../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PageContainer=styled.div`\n  max-width: 800px;\n  margin: 2rem auto;\n  padding: 0 1rem;\n`;const PageTitle=styled.h1`\n  margin-bottom: 1.5rem;\n  color: ${props=>props.theme.colors.text};\n  font-weight: ${props=>props.theme.fontWeights.bold};\n`;const RecipientInfo=styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding: 1rem;\n  background-color: ${props=>props.theme.colors.backgroundDark};\n  border-radius: ${props=>props.theme.borderRadius.medium};\n`;const Avatar=styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-right: 1rem;\n`;const RecipientName=styled.h3`\n  margin: 0;\n  color: ${props=>props.theme.colors.text};\n  font-weight: ${props=>props.theme.fontWeights.semibold};\n`;const ErrorMessage=styled.div`\n  color: ${props=>props.theme.colors.error};\n  background-color: rgba(255, 59, 48, 0.1);\n  border: 1px solid rgba(255, 59, 48, 0.2);\n  border-radius: ${props=>props.theme.borderRadius.small};\n  padding: 0.75rem 1rem;\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n`;const LoadingMessage=styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: ${props=>props.theme.colors.textLight};\n`;const ComposeMessage=()=>{const{userId}=useParams();const navigate=useNavigate();const[recipient,setRecipient]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchRecipient=async()=>{try{setLoading(true);const response=await api.get(`/api/users/${userId}`);setRecipient(response.data);setLoading(false);}catch(err){console.error('Error fetching recipient:',err);if(err.response){setError(err.response.data.message||'Failed to load recipient information');}else if(err.request){setError('Network error - could not connect to server');}else{setError(err.message||'Failed to load recipient information');}setLoading(false);}};if(userId){fetchRecipient();}else{setError('No recipient specified');setLoading(false);}},[userId]);const handleMessageSent=()=>{// Navigate to inbox after message is sent\nnavigate('/inbox');};if(loading){return/*#__PURE__*/_jsx(PageContainer,{children:/*#__PURE__*/_jsx(LoadingMessage,{children:\"Loading recipient information...\"})});}if(error){return/*#__PURE__*/_jsx(PageContainer,{children:/*#__PURE__*/_jsx(ErrorMessage,{children:error})});}return/*#__PURE__*/_jsxs(PageContainer,{children:[/*#__PURE__*/_jsx(PageTitle,{children:\"New Message\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:recipient&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(RecipientInfo,{children:[/*#__PURE__*/_jsx(Avatar,{src:recipient.profilePicture||'/default-avatar.png',alt:recipient.name}),/*#__PURE__*/_jsxs(RecipientName,{children:[\"To: \",recipient.name]})]}),/*#__PURE__*/_jsx(MessageForm,{recipientId:recipient._id,onMessageSent:handleMessageSent})]})})})]});};export default ComposeMessage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","styled","Card","MessageForm","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PageContainer","div","PageTitle","h1","props","theme","colors","text","fontWeights","bold","RecipientInfo","backgroundDark","borderRadius","medium","Avatar","img","RecipientName","h3","semibold","ErrorMessage","error","small","LoadingMessage","textLight","ComposeMessage","userId","navigate","recipient","setRecipient","loading","setLoading","setError","fetchRecipient","response","get","data","err","console","message","request","handleMessageSent","children","Body","src","profilePicture","alt","name","recipientId","_id","onMessageSent"],"sources":["/Users/davidmcguire/Desktop/Master/Cursor/AudioZoom/client/src/pages/ComposeMessage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport styled from 'styled-components';\nimport Card from '../components/Card';\nimport MessageForm from '../components/MessageForm';\nimport api from '../utils/api';\n\nconst PageContainer = styled.div`\n  max-width: 800px;\n  margin: 2rem auto;\n  padding: 0 1rem;\n`;\n\nconst PageTitle = styled.h1`\n  margin-bottom: 1.5rem;\n  color: ${props => props.theme.colors.text};\n  font-weight: ${props => props.theme.fontWeights.bold};\n`;\n\nconst RecipientInfo = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding: 1rem;\n  background-color: ${props => props.theme.colors.backgroundDark};\n  border-radius: ${props => props.theme.borderRadius.medium};\n`;\n\nconst Avatar = styled.img`\n  width: 50px;\n  height: 50px;\n  border-radius: 50%;\n  object-fit: cover;\n  margin-right: 1rem;\n`;\n\nconst RecipientName = styled.h3`\n  margin: 0;\n  color: ${props => props.theme.colors.text};\n  font-weight: ${props => props.theme.fontWeights.semibold};\n`;\n\nconst ErrorMessage = styled.div`\n  color: ${props => props.theme.colors.error};\n  background-color: rgba(255, 59, 48, 0.1);\n  border: 1px solid rgba(255, 59, 48, 0.2);\n  border-radius: ${props => props.theme.borderRadius.small};\n  padding: 0.75rem 1rem;\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n`;\n\nconst LoadingMessage = styled.div`\n  text-align: center;\n  padding: 2rem;\n  color: ${props => props.theme.colors.textLight};\n`;\n\nconst ComposeMessage = () => {\n  const { userId } = useParams();\n  const navigate = useNavigate();\n  const [recipient, setRecipient] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchRecipient = async () => {\n      try {\n        setLoading(true);\n        const response = await api.get(`/api/users/${userId}`);\n        setRecipient(response.data);\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching recipient:', err);\n        if (err.response) {\n          setError(err.response.data.message || 'Failed to load recipient information');\n        } else if (err.request) {\n          setError('Network error - could not connect to server');\n        } else {\n          setError(err.message || 'Failed to load recipient information');\n        }\n        setLoading(false);\n      }\n    };\n\n    if (userId) {\n      fetchRecipient();\n    } else {\n      setError('No recipient specified');\n      setLoading(false);\n    }\n  }, [userId]);\n\n  const handleMessageSent = () => {\n    // Navigate to inbox after message is sent\n    navigate('/inbox');\n  };\n\n  if (loading) {\n    return (\n      <PageContainer>\n        <LoadingMessage>Loading recipient information...</LoadingMessage>\n      </PageContainer>\n    );\n  }\n\n  if (error) {\n    return (\n      <PageContainer>\n        <ErrorMessage>{error}</ErrorMessage>\n      </PageContainer>\n    );\n  }\n\n  return (\n    <PageContainer>\n      <PageTitle>New Message</PageTitle>\n      \n      <Card>\n        <Card.Body>\n          {recipient && (\n            <>\n              <RecipientInfo>\n                <Avatar \n                  src={recipient.profilePicture || '/default-avatar.png'} \n                  alt={recipient.name} \n                />\n                <RecipientName>To: {recipient.name}</RecipientName>\n              </RecipientInfo>\n              \n              <MessageForm \n                recipientId={recipient._id} \n                onMessageSent={handleMessageSent}\n              />\n            </>\n          )}\n        </Card.Body>\n      </Card>\n    </PageContainer>\n  );\n};\n\nexport default ComposeMessage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}